webpackJsonp([1],{"2NXm":function(t,e,s){"use strict";var a=s("BB1X"),n=s("NcyV"),i=s("dfjY"),o=i(a.a,n.a,null,null,null);e.a=o.exports},"2uFj":function(t,e,s){"use strict";e.a={setTime:200,shu:"警察",cao:"小偷",map:"地图",error:"服务异常，请重试"}},"3F7r":function(t,e){},BB1X:function(t,e,s){"use strict";var a=s("qWzu"),n=s.n(a),i=s("tNuX"),o=s("Q4A5"),c=s("n8Wm"),r=(s.n(c),s("2uFj"));e.a={data:function(){return{step:"one",configs:r.a,msg:"加载中...",tempPeople:{},maps:{},shuMap:{},caoMap:{},teamA:[],teamB:[],tdHeight:50,currentMap:{},steps:0,stepsNumber:0,countdownNumber:5,resultsString:"",winner:"",winnerRole:"",replay:!1,form:{caoName:"",shuName:"",mapName:""}}},mounted:function(){var t=this;t.fetchData(o.a.players,"team"),t.fetchData(o.a.mapList,"map")},methods:{replayAgain:function(){var t=document.location.origin+"?"+(new Date).getTime();document.location.href=t},changeMap:function(t){var e=this,s=e.maps[e.form.mapName],a=s.colLen,n=window.innerHeight-250;e.tdHeight=n/a,e.currentMap=s},getType:function(t,e){var s={},a=[];for(var i in t)"road"==i||"block"==i||"unknown"==i?t[i]&&(s.type=i):t[i]&&a.push(i);return s.people=a,localStorage.setItem(e,n()(s)),s},getPeople:function(t){return JSON.parse(localStorage.getItem(t))},random:function(){return parseInt(5*Math.random())},start:function(){var t=this;if(!t.form.shuName)return void t.$message({message:"请选择"+t.configs.shu,type:"warning"});if(!t.form.caoName)return void t.$message({message:"请选择"+t.configs.cao,type:"warning"});if(!t.form.mapName)return void t.$message({message:"请选择"+t.configs.map,type:"warning"});t.step="countdown";var e=setInterval(function(){0==--t.countdownNumber&&(clearInterval(e),t.step="two",t.startGame())},1e3)},startGame:function(){var t=this,e=this,s=e.form,a=e.$loading({text:"处理中"});i.a.ajax(o.a.start,"get",s).then(function(t){e.move(),a.close(),e.countdownMethod()}).catch(function(e){var s=t;setTimeout(function(){s.$message({message:r.a.error,type:"warning"}),a.close()},1e3),console.log(e)})},countdownMethod:function(){var t=this,e=setInterval(function(){0==--t.countdownNumber&&(t.step="two",clearInterval(e))},1e3)},winAn:function(){var t=this,e="";"cao"==t.winnerRole?e=t.stepsNumber>350?"【"+t.form.caoName+"】("+t.configs.cao+")很猥琐，【"+t.form.shuName+"】("+t.configs.shu+")表示很无语，【"+t.form.caoName+"】("+t.configs.cao+")取得最终胜利！":"【"+t.form.caoName+"】("+t.configs.cao+")使出了凌波微步疯狂闪躲，逃出了【"+t.form.shuName+"】("+t.configs.shu+")的围捕，取得最终胜利！":(e="【"+t.form.shuName+"】("+t.configs.shu+")使出横扫千军，以迅雷不及掩耳盗铃之势，抓住了【"+t.form.caoName+"】("+t.configs.cao+")，取得最终胜利！",t.stepsNumber>450&&(e="【"+t.form.shuName+"】("+t.configs.shu+")经过几个来回的扫荡，就差要去刨别人的祖坟，终于艰难的抓住了【"+t.form.caoName+"】("+t.configs.cao+")，取得最终胜利！"));var s=e.length,a=1,n=setInterval(function(){t.resultsString=e.substring(0,a),++a==s+1&&clearInterval(n)},100)},selectLi:function(t,e){var s=this;if(s.form[t]=e,"mapName"==t){var a=s.maps[s.form.mapName],n=a.colLen,i=window.innerHeight-250;s.tdHeight=i/n,s.currentMap=a}},move:function(){var t=this,e=this;i.a.ajax(o.a.move).then(function(t){var s=t.data.data;if(e.stepsNumber=s.steps,s.winner){var a=s.winnerRole;a=a.toLowerCase(),e.winner=s.winner,e.winnerRole=a,e.step="three",e.winAn();var n=setInterval(function(){++e.steps==s.steps&&clearInterval(n)},15)}else e.currentMap=s.gameMap,e.caoMap=s.caoMap,e.shuMap=s.shuMap,setTimeout(function(){e.move()},r.a.setTime)}).catch(function(e){t.move()})},fetchData:function(t,e){var s=this,a=this,n=a.$loading({text:a.msg});i.a.ajax(t).then(function(t){var s=t.data.data;if("team"==e)a.teamA=s,a.teamB=s;else{for(var i={},o=0;o<s.length;o++)i[s[o].name]=s[o];a.maps=i}setTimeout(function(){n.close()},1e3)}).catch(function(t){var e=s;setTimeout(function(){e.$message({message:r.a.error,type:"warning"}),n.close()},1e3),console.log(t)})}}}},M93x:function(t,e,s){"use strict";function a(t){s("o9Ea")}var n=s("vYvj"),i=s("VKAM"),o=s("dfjY"),c=a,r=o(n.a,i.a,c,null,null);e.a=r.exports},NHnr:function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=s("aS8h"),n=s("M93x"),i=s("YaEn"),o=s("JeXE"),c=s.n(o),r=s("3F7r");s.n(r);a.default.config.productionTip=!1,a.default.use(c.a),new a.default({el:"#app",router:i.a,template:"<App/>",components:{App:n.a}})},NcyV:function(t,e,s){"use strict";var a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"wrap-content"},["one"==t.step?[s("div",{staticClass:"bg start-bg"}),t._v(" "),s("div",{staticClass:"steps"},[s("div",{staticClass:"step-one"},[s("div",{staticClass:"select"},[s("dl",[s("dt",{staticClass:"icon-shu"},[t._v(t._s(t.configs.shu)+"队伍")]),t._v(" "),s("dd",[s("ul",[t._l(t.teamA,function(e,a){return[s("li",{staticClass:"team icon-shu-li",class:{on:t.form.shuName==e},attrs:{title:e},on:{click:function(s){t.selectLi("shuName",e)}}},[s("i",[t._v(t._s(e))])])]})],2)])])]),t._v(" "),s("div",{staticClass:"select"},[s("dl",[s("dt",{staticClass:"icon-cao"},[t._v(t._s(t.configs.cao))]),t._v(" "),s("dd",[s("ul",[t._l(t.teamB,function(e){return[s("li",{staticClass:"team icon-cao-li",class:{on:t.form.caoName==e},attrs:{title:e},on:{click:function(s){t.selectLi("caoName",e)}}},[s("i",[t._v("\n                      "+t._s(e)+"\n                    ")])])]})],2)])])]),t._v(" "),s("div",{staticClass:"select"},[s("dl",[s("dt",[t._v(t._s(t.configs.map))]),t._v(" "),s("dd",[s("ul",[t._l(t.maps,function(e,a,n){return[s("li",{class:[{on:t.form.mapName==a},"icon-map-"+n],on:{click:function(e){t.selectLi("mapName",a)}}},[s("i",[t._v(t._s(a))])])]})],2)])])])]),t._v(" "),s("div",{staticClass:"start"},[s("button",{staticClass:"btn",on:{click:t.start}},[t._v("开始")])])])]:t._e(),t._v(" "),"countdown"==t.step?[t._m(0),t._v(" "),s("div",{staticClass:"steps"},[s("div",{staticClass:"countdown"},[t._v(t._s(t.countdownNumber))])])]:t._e(),t._v(" "),"two"==t.step?[s("div",{staticClass:"bg map-bg"}),t._v(" "),s("div",{staticClass:"steps step-two"},[s("div",{staticClass:"title"},[s("div",{staticClass:"border"},[s("span",{staticClass:"shu"},[t._v(t._s(t.form.shuName))]),t._v(" "),s("i",[t._v("VS")]),t._v(" "),s("span",{staticClass:"cao"},[t._v(t._s(t.form.caoName))])]),t._v(" "),s("div",{staticClass:"info"},[t.stepsNumber?[t._v("\n            step : "+t._s(t.stepsNumber)+"\n          ")]:t._e()],2)]),t._v(" "),s("div",{staticClass:"view"},[s("div",{staticClass:"god-view f-left"},[s("table",{staticClass:"table"},t._l(t.currentMap.map,function(e){return s("tr",t._l(e,function(e){return s("td",{class:t.getType(e,"people").type,attrs:{height:t.tdHeight+"px"}},[s("div",{staticClass:"type"},[t._l(t.getPeople("people").people,function(e,a){return[t.getPeople("people").people.length>1&&0==a&&!t.winner?[s("em",{staticClass:"number"},[t._v(t._s(t.getPeople("people").people.length))])]:t._e(),t._v(" "),"cao"==e?[s("i",{class:e,style:"height:"+t.tdHeight/2+"px"},[t._v("匪")])]:[s("span",{staticClass:"shu",class:e,style:"height:"+t.tdHeight/2+"px"},[t._v("警")])]]}),t._v(" "),"block"==t.getPeople("people").type?[s("em",{staticClass:"bl"},[t._v("\n                      路障\n                    ")])]:t._e()],2)])}))}))]),t._v(" "),s("div",{staticClass:"other-view f-right"},[s("div",{staticClass:"shu-view"},[s("h2",{attrs:{title:t.form.shuName}},[t._v(t._s(t.configs.shu)+"："+t._s(t.form.shuName))]),t._v(" "),s("table",{staticClass:"table"},t._l(t.shuMap.map,function(e){return s("tr",t._l(e,function(e){return s("td",{class:t.getType(e,"shuPeople").type,attrs:{height:t.tdHeight/2+"px"}},[s("div",{staticClass:"type"},[t._l(t.getPeople("shuPeople").people,function(e,a){return[t.getPeople("shuPeople").people.length>1&&0==a&&!t.winner?[s("em",{staticClass:"number"},[t._v(t._s(t.getPeople("shuPeople").people.length))])]:t._e(),t._v(" "),"cao"==e?[s("i",{class:e,style:"height:"+t.tdHeight/4+"px"},[t._v("匪")])]:[s("span",{staticClass:"shu",class:e,style:"height:"+t.tdHeight/4+"px"},[t._v("警")])]]}),t._v(" "),"block"==t.getPeople("shuPeople").type?[s("em",{staticClass:"bl"},[t._v("\n                        路障\n                      ")])]:t._e()],2)])}))}))]),t._v(" "),s("div",{staticClass:"cao-view"},[s("h2",{attrs:{title:t.form.caoName}},[t._v(t._s(t.configs.cao)+"："+t._s(t.form.caoName))]),t._v(" "),s("table",{staticClass:"table"},t._l(t.caoMap.map,function(e){return s("tr",t._l(e,function(e){return s("td",{class:t.getType(e,"caoPeople").type,attrs:{height:t.tdHeight/2+"px"}},[s("div",{staticClass:"type"},[t._l(t.getPeople("caoPeople").people,function(e,a){return[t.getPeople("caoPeople").people.length>1&&0==a&&!t.winner?[s("em",{staticClass:"number"},[t._v(t._s(t.getPeople("caoPeople").people.length))])]:t._e(),t._v(" "),"cao"==e?[s("i",{class:e,style:"height:"+t.tdHeight/4+"px"},[t._v("匪")])]:[s("span",{staticClass:"shu",class:e,style:"height:"+t.tdHeight/4+"px"},[t._v("警")])]]}),t._v(" "),"block"==t.getPeople("shuPeople").type?[s("em",{staticClass:"bl"},[t._v("\n                        路障\n                      ")])]:t._e()],2)])}))}))])])]),t._v(" "),t.winner?s("div",{staticClass:"replay"},[s("el-button",{attrs:{type:"primary"},on:{click:t.replayAgain}},[t._v("再来一盘\n        ")])],1):t._e()])]:t._e(),t._v(" "),"three"==t.step?[s("div",{staticClass:"bg win-bg"}),t._v(" "),s("div",{staticClass:"steps step-three"},[s("div",{staticClass:"tai"},[s("div",{class:"people-"+t.winnerRole})]),t._v(" "),s("div",{staticClass:"win-top"}),t._v(" "),s("div",{staticClass:"win-title"},[t._v(t._s(t.winner))]),t._v(" "),s("div",{staticClass:"step-icon"},[t._v(t._s(t.steps))]),t._v(" "),s("div",{staticClass:"content"},[s("p",[t._v(t._s(t.resultsString))])]),t._v(" "),s("button",{staticClass:"replay",on:{click:t.replayAgain}},[t._v("再来一盘")])])]:t._e()],2)},n=[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"countdown-bg"},[s("div",{staticClass:"img1 move1"}),t._v(" "),s("div",{staticClass:"img2 move2"}),t._v(" "),s("div",{staticClass:"img3 move3"})])}],i={render:a,staticRenderFns:n};e.a=i},Q4A5:function(t,e,s){"use strict";e.a={mapList:"/play/maps",players:"/play/players",start:"/play/start",move:"/play/move"}},VKAM:function(t,e,s){"use strict";var a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{attrs:{id:"app"}},[s("router-view")],1)},n=[],i={render:a,staticRenderFns:n};e.a=i},YaEn:function(t,e,s){"use strict";var a=s("aS8h"),n=s("sv+d"),i=s("2NXm");a.default.use(n.a),e.a=new n.a({routes:[{path:"/",name:"Index",component:i.a}]})},o9Ea:function(t,e){},tNuX:function(t,e,s){"use strict";var a=s("Hcuw"),n=s.n(a),i=s("GYbZ"),o=s.n(i),c=s("n8Wm"),r=s.n(c),l=function(t){return new n.a(function(e,s){o.a.create({headers:{"X-Header":"product","Content-Type":"application/x-www-form-urlencoded"}})(t).then(function(t){e(t)}).catch(function(t){s(t)})})},u=function(t,e,s){var a=e||"get",n=s;switch(n=r.a.stringify(s),e){case"get":t=n?t+"?"+n:t}return l({url:t,method:a,data:n})};e.a={ajax:u}},vYvj:function(t,e,s){"use strict";e.a={name:"app"}}},["NHnr"]);